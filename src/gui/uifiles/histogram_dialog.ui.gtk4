<?xml version="1.0" encoding="UTF-8"?>
<interface>
  <requires lib="gtk" version="4.0"/>
  <object class="GtkAdjustment" id="adj_black_point_payne">
    <property name="upper">1</property>
    <property name="step-increment">0.001</property>
    <property name="page-increment">0.01</property>
  </object>
  <object class="GtkAdjustment" id="adjustment_payneD">
    <property name="upper">10</property>
    <property name="step-increment">0.01</property>
    <property name="page-increment">0.10</property>
  </object>
  <object class="GtkAdjustment" id="adjustment_payneD1">
    <property name="upper">10</property>
    <property name="step-increment">0.01</property>
    <property name="page-increment">0.10</property>
  </object>
  <object class="GtkAdjustment" id="adjustment_payneHP">
    <property name="upper">1</property>
    <property name="value">1</property>
    <property name="step-increment">0.001</property>
    <property name="page-increment">0.01</property>
  </object>
  <object class="GtkAdjustment" id="adjustment_payneHP1">
    <property name="upper">1</property>
    <property name="value">1</property>
    <property name="step-increment">0.001</property>
    <property name="page-increment">0.01</property>
  </object>
  <object class="GtkAdjustment" id="adjustment_payneLP">
    <property name="upper">1</property>
    <property name="step-increment">0.001</property>
    <property name="page-increment">0.01</property>
  </object>
  <object class="GtkAdjustment" id="adjustment_payneLP1">
    <property name="upper">1</property>
    <property name="step-increment">0.001</property>
    <property name="page-increment">0.01</property>
  </object>
  <object class="GtkAdjustment" id="adjustment_payneSP">
    <property name="upper">1</property>
    <property name="step-increment">0.001</property>
    <property name="page-increment">0.01</property>
  </object>
  <object class="GtkAdjustment" id="adjustment_payneSP1">
    <property name="upper">1</property>
    <property name="step-increment">0.001</property>
    <property name="page-increment">0.01</property>
  </object>
  <object class="GtkAdjustment" id="adjustment_payneb">
    <property name="lower">-5</property>
    <property name="upper">15</property>
    <property name="value">0.5</property>
    <property name="step-increment">0.01</property>
    <property name="page-increment">0.10</property>
  </object>
  <object class="GtkImage" id="curve">
    <property name="resource">/org/siril/ui/pixmaps/curve.svg</property>
  </object>
  <object class="GtkImage" id="grid">
    <property name="resource">/org/siril/ui/pixmaps/grid.svg</property>
  </object>
  <object class="GtkImage" id="histo-orig">
    <property name="resource">/org/siril/ui/pixmaps/histo-orig.svg</property>
  </object>
  <object class="GtkAdjustment" id="histoAdjZoomH">
    <property name="lower">1</property>
    <property name="upper">100</property>
    <property name="value">1</property>
    <property name="step-increment">1</property>
    <property name="page-increment">10</property>
  </object>
  <object class="GtkAdjustment" id="histoAdjZoomV">
    <property name="lower">1</property>
    <property name="upper">100</property>
    <property name="value">1</property>
    <property name="step-increment">1</property>
    <property name="page-increment">10</property>
  </object>
  <object class="GtkImage" id="histo_blue">
    <property name="resource">/org/siril/ui/pixmaps/b.svg</property>
  </object>
  <object class="GtkImage" id="histo_green">
    <property name="resource">/org/siril/ui/pixmaps/g.svg</property>
  </object>
  <object class="GtkImage" id="histo_red">
    <property name="resource">/org/siril/ui/pixmaps/r.svg</property>
  </object>
  <object class="GtkImage" id="mtf">
    <property name="resource">/org/siril/ui/pixmaps/mtf.svg</property>
  </object>
  <object class="GtkDialog" id="histogram_dialog">
    <property name="width-request">400</property>
    <property name="height-request">1</property>
    <property name="border-width">5</property>
    <property name="title" translatable="1">Histogram Transformation</property>
    <property name="default-width">1</property>
    <property name="default-height">1</property>
    <property name="type-hint">dialog</property>
    <signal name="delete-event" handler="gtk_widget_hide_on_delete" swapped="no"/>
    <signal name="hide" handler="on_button_histo_close_clicked" swapped="no"/>
    <signal name="show" handler="on_histogram_window_show" swapped="no"/>
    <child internal-child="content_area">
      <object class="GtkBox">
        <property name="visible">0</property>
        <property name="orientation">vertical</property>
        <property name="spacing">10</property>
        <child>
          <object class="GtkBox">
            <property name="hexpand">1</property>
            <property name="vexpand">1</property>
            <property name="spacing">5</property>
            <property name="baseline-position">top</property>
            <child>
              <object class="GtkBox">
                <property name="hexpand">1</property>
                <property name="vexpand">1</property>
                <property name="orientation">vertical</property>
                <property name="spacing">5</property>
                <property name="baseline-position">top</property>
                <child>
                  <object class="GtkBox" id="histoToolbar1">
                    <property name="css-classes">toolbar</property>
                    <property name="can-focus">0</property>
                    <property name="valign">end</property>
                    <property name="icon_size">2</property>
                    <child>
                      <object class="GtkToolItem" id="toolbutton1">
                        <property name="visible">True</property>
                        <property name="can-focus">False</property>
                        <child>
                          <object class="GtkSpinButton" id="histoSpinZoomH">
                            <property name="focusable">1</property>
                            <property name="tooltip-text" translatable="1">Horizontal Zoom</property>
                            <property name="text">1</property>
                            <property name="input-purpose">number</property>
                            <property name="input-hints">GTK_INPUT_HINT_NO_EMOJI | GTK_INPUT_HINT_NONE</property>
                            <property name="adjustment">histoAdjZoomH</property>
                            <property name="numeric">1</property>
                            <property name="value">1</property>
                            <signal name="value-changed" handler="on_histoSpinZoom_value_changed" swapped="no"/>
                          </object>
                        </child>
                      </object>
                    </child>
                    <child>
                      <object class="GtkButton" id="histoZoom100">
                        <property name="can-focus">0</property>
                        <property name="tooltip-text" translatable="1">Reset zooms to 1.</property>
                        <property name="halign">center</property>
                        <property name="valign">center</property>
                        <property name="use-underline">1</property>
                        <property name="icon-name">zoom-original-symbolic</property>
                        <signal name="clicked" handler="on_histoZoom100_clicked" swapped="no"/>
                      </object>
                    </child>
                    <child>
                      <object class="GtkToolItem" id="histoToolLog">
                        <property name="visible">True</property>
                        <property name="can-focus">False</property>
                        <property name="halign">end</property>
                        <child>
                          <object class="GtkCheckButton" id="HistoCheckLogButton">
                            <property name="label" translatable="1">Logarithmic scale</property>
                            <property name="focusable">1</property>
                            <property name="tooltip-text" translatable="1">Show the histogram with a logarithmic scale. Does not affect the transfer function display.
</property>
                            <property name="halign">end</property>
                            <signal name="toggled" handler="on_histo_toggled" swapped="no"/>
                          </object>
                        </child>
                      </object>
                    </child>
                  </object>
                </child>
                <child>
                  <object class="GtkScrolledWindow" id="histoScroll">
                    <property name="height-request">300</property>
                    <property name="focusable">1</property>
                    <property name="hexpand">1</property>
                    <property name="vexpand">1</property>
                    <property name="hscrollbar-policy">always</property>
                    <property name="overlay-scrolling">0</property>
                    <property name="child">
                      <object class="GtkViewport" id="viewport1">
                        <property name="hexpand">1</property>
                        <property name="vexpand">1</property>
                        <property name="child">
                          <object class="GtkDrawingArea" id="drawingarea_histograms">
                            <property name="events">GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_MOTION_MASK | GDK_BUTTON1_MOTION_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK | GDK_ENTER_NOTIFY_MASK | GDK_LEAVE_NOTIFY_MASK</property>
                            <property name="hexpand">1</property>
                            <property name="vexpand">1</property>
                            <signal name="button-press-event" handler="on_drawingarea_histograms_button_press_event" swapped="no"/>
                            <signal name="button-release-event" handler="on_drawingarea_histograms_button_release_event" swapped="no"/>
                            <signal name="draw" handler="redraw_histo" swapped="no"/>
                            <signal name="leave-notify-event" handler="on_drawingarea_histograms_leave_notify_event" swapped="no"/>
                            <signal name="motion-notify-event" handler="on_drawingarea_histograms_motion_notify_event" swapped="no"/>
                          </object>
                        </property>
                      </object>
                    </property>
                  </object>
                </child>
                <child>
                  <object class="GtkBox" id="histoToolbar2">
                    <property name="css-classes">toolbar</property>
                    <property name="can-focus">0</property>
                    <property name="valign">start</property>
                    <property name="show-arrow">False</property>
                    <property name="icon_size">5</property>
                    <child>
                      <object class="GtkToggleButton" id="histoToolRed">
                        <property name="name">histoToolRed</property>
                        <property name="can-focus">0</property>
                        <property name="tooltip-text" translatable="1">Toggles whether the stretch applies to the red channel</property>
                        <property name="halign">center</property>
                        <property name="valign">center</property>
                        <property name="use-underline">1</property>
                        <property name="icon-widget">histo_red</property>
                        <property name="active">1</property>
                        <signal name="toggled" handler="on_histo_toggled" swapped="no"/>
                      </object>
                    </child>
                    <child>
                      <object class="GtkToggleButton" id="histoToolGreen">
                        <property name="name">histoToolGreen</property>
                        <property name="can-focus">0</property>
                        <property name="tooltip-text" translatable="1">Toggles whether the stretch applies to the green channel</property>
                        <property name="halign">center</property>
                        <property name="valign">center</property>
                        <property name="use-underline">1</property>
                        <property name="icon-widget">histo_green</property>
                        <property name="active">1</property>
                        <signal name="toggled" handler="on_histo_toggled" swapped="no"/>
                      </object>
                    </child>
                    <child>
                      <object class="GtkToggleButton" id="histoToolBlue">
                        <property name="name">histoToolBlue</property>
                        <property name="can-focus">0</property>
                        <property name="tooltip-text" translatable="1">Toggles whether the stretch applies to the blue channel</property>
                        <property name="halign">center</property>
                        <property name="valign">center</property>
                        <property name="use-underline">1</property>
                        <property name="icon-widget">histo_blue</property>
                        <property name="active">1</property>
                        <signal name="toggled" handler="on_histo_toggled" swapped="no"/>
                      </object>
                    </child>
                    <child>
                      <object class="GtkSeparator" id="&lt;sÃ©parateur&gt;3">
                        <property name="orientation">vertical</property>
                        <property name="can-focus">0</property>
                      </object>
                    </child>
                    <child>
                      <object class="GtkToggleButton" id="histoToolGrid">
                        <property name="can-focus">0</property>
                        <property name="tooltip-text" translatable="1">Show grids</property>
                        <property name="halign">center</property>
                        <property name="valign">center</property>
                        <property name="use-underline">1</property>
                        <property name="icon-widget">grid</property>
                        <property name="active">1</property>
                        <signal name="toggled" handler="on_histo_toggled" swapped="no"/>
                      </object>
                    </child>
                    <child>
                      <object class="GtkToggleButton" id="histoToolCurve">
                        <property name="can-focus">0</property>
                        <property name="tooltip-text" translatable="1">Show transfer curve plus the line y=x</property>
                        <property name="halign">center</property>
                        <property name="valign">center</property>
                        <property name="use-underline">1</property>
                        <property name="icon-widget">curve</property>
                        <property name="active">1</property>
                        <signal name="toggled" handler="on_histo_toggled" swapped="no"/>
                      </object>
                    </child>
                    <child>
                      <object class="GtkToggleButton" id="histoToolOrig">
                        <property name="can-focus">0</property>
                        <property name="tooltip-text" translatable="1">Show pre-stretch histogram</property>
                        <property name="halign">center</property>
                        <property name="valign">center</property>
                        <property name="use-underline">1</property>
                        <property name="icon-widget">histo-orig</property>
                        <property name="active">1</property>
                        <signal name="toggled" handler="on_histo_toggled" swapped="no"/>
                      </object>
                    </child>
                    <child>
                      <object class="GtkSeparator" id="toolbutton3">
                        <property name="orientation">vertical</property>
                        <property name="can-focus">0</property>
                      </object>
                    </child>
                    <child>
                      <object class="GtkButton" id="histoToolAutoStretch">
                        <property name="can-focus">0</property>
                        <property name="tooltip-text" translatable="1">Apply autostretch algorithm to image</property>
                        <property name="use-underline">1</property>
                        <property name="icon-widget">mtf</property>
                        <signal name="clicked" handler="on_histoToolAutoStretch_clicked" swapped="no"/>
                      </object>
                    </child>
                  </object>
                </child>
                <child>
                  <object class="GtkBox">
                    <child>
                      <object class="GtkGrid" id="grid32">
                        <property name="hexpand">1</property>
                        <property name="valign">start</property>
                        <property name="column-spacing">10</property>
                        <child>
                          <object class="GtkLabel" id="label134">
                            <property name="halign">start</property>
                            <property name="label" translatable="1">Highlights: </property>
                            <layout>
                              <property name="column">0</property>
                              <property name="row">2</property>
                            </layout>
                          </object>
                        </child>
                        <child>
                          <object class="GtkLabel" id="label135">
                            <property name="halign">start</property>
                            <property name="label" translatable="1">Midtones: </property>
                            <layout>
                              <property name="column">0</property>
                              <property name="row">0</property>
                            </layout>
                          </object>
                        </child>
                        <child>
                          <object class="GtkLabel" id="label136">
                            <property name="halign">start</property>
                            <property name="label" translatable="1">Shadows: </property>
                            <layout>
                              <property name="column">0</property>
                              <property name="row">1</property>
                            </layout>
                          </object>
                        </child>
                        <child>
                          <object class="GtkEntry" id="histoMidEntry">
                            <property name="focusable">1</property>
                            <property name="tooltip-text" translatable="1">Midtones balance</property>
                            <property name="hexpand">1</property>
                            <property name="has-frame">0</property>
                            <property name="width-chars">10</property>
                            <property name="text">0.5000000</property>
                            <property name="input-purpose">number</property>
                            <signal name="activate" handler="on_histoMidEntry_activate" swapped="no"/>
                            <signal name="focus-out-event" handler="on_histoMidEntry_focus_out_event" swapped="no"/>
                            <layout>
                              <property name="column">1</property>
                              <property name="row">0</property>
                            </layout>
                          </object>
                        </child>
                        <child>
                          <object class="GtkEntry" id="histoShadEntry">
                            <property name="focusable">1</property>
                            <property name="tooltip-text" translatable="1">Shadows clipping</property>
                            <property name="hexpand">1</property>
                            <property name="has-frame">0</property>
                            <property name="width-chars">10</property>
                            <property name="text">0.0000000</property>
                            <property name="input-purpose">number</property>
                            <signal name="activate" handler="on_histoShadEntry_activate" swapped="no"/>
                            <signal name="focus-out-event" handler="on_histoShadEntry_focus_out_event" swapped="no"/>
                            <layout>
                              <property name="column">1</property>
                              <property name="row">1</property>
                            </layout>
                          </object>
                        </child>
                        <child>
                          <object class="GtkEntry" id="histoHighEntry">
                            <property name="focusable">1</property>
                            <property name="tooltip-text" translatable="1">Highlights clipping</property>
                            <property name="hexpand">1</property>
                            <property name="has-frame">0</property>
                            <property name="width-chars">10</property>
                            <property name="text">1.0000000</property>
                            <property name="input-purpose">number</property>
                            <signal name="activate" handler="on_histoHighEntry_activate" swapped="no"/>
                            <signal name="focus-out-event" handler="on_histoHighEntry_focus_out_event" swapped="no"/>
                            <layout>
                              <property name="column">1</property>
                              <property name="row">2</property>
                            </layout>
                          </object>
                        </child>
                      </object>
                    </child>
                    <child>
                      <object class="GtkBox" id="histo_box_clip">
                        <property name="orientation">vertical</property>
                        <child>
                          <object class="GtkLabel" id="label137">
                            <property name="halign">center</property>
                            <property name="label" translatable="1">Clip (%)</property>
                          </object>
                        </child>
                        <child>
                          <object class="GtkEntry" id="clip_shadows">
                            <property name="sensitive">0</property>
                            <property name="focusable">1</property>
                            <property name="tooltip-text" translatable="1">Clipped pixels count (shadows)</property>
                            <property name="halign">center</property>
                            <property name="editable">0</property>
                            <property name="has-frame">0</property>
                            <property name="width-chars">6</property>
                            <property name="max-width-chars">8</property>
                          </object>
                        </child>
                        <child>
                          <object class="GtkEntry" id="clip_highlights">
                            <property name="sensitive">0</property>
                            <property name="focusable">1</property>
                            <property name="tooltip-text" translatable="1">Clipped pixels count (highlights)</property>
                            <property name="halign">center</property>
                            <property name="editable">0</property>
                            <property name="has-frame">0</property>
                            <property name="width-chars">6</property>
                            <property name="max-width-chars">8</property>
                          </object>
                        </child>
                      </object>
                    </child>
                  </object>
                </child>
                <child>
                  <object class="GtkBox">
                    <property name="valign">start</property>
                    <property name="spacing">5</property>
                    <child>
                      <object class="GtkCheckButton" id="checkMTFSeq">
                        <property name="label" translatable="1">Apply to sequence</property>
                        <property name="focusable">1</property>
                        <property name="tooltip-text" translatable="1">If a sequence is loaded and this is activated, perform the processing on all images of the sequence instead of only the loaded image.</property>
                        <property name="halign">start</property>
                      </object>
                    </child>
                    <child>
                      <object class="GtkLabel" id="label44">
                        <property name="halign">start</property>
                        <property name="label" translatable="1">Output prefix:</property>
                      </object>
                    </child>
                    <child>
                      <object class="GtkEntry" id="entryMTFSeq">
                        <property name="focusable">1</property>
                        <property name="tooltip-text" translatable="1">Prefix of the image names resulting from the mtf process.</property>
                        <property name="max-length">10</property>
                        <property name="width-chars">10</property>
                        <property name="text">stretch_</property>
                        <property name="input-hints">GTK_INPUT_HINT_NO_EMOJI | GTK_INPUT_HINT_NONE</property>
                      </object>
                    </child>
                  </object>
                </child>
                <child>
                  <object class="GtkCheckButton" id="HistoCheckPreview">
                    <property name="label" translatable="1">Preview</property>
                    <property name="focusable">1</property>
                    <property name="tooltip-text" translatable="1">Toggle preview on / off</property>
                    <property name="halign">start</property>
                    <property name="active">1</property>
                    <signal name="toggled" handler="on_histo_preview_toggled" swapped="no"/>
                  </object>
                </child>
              </object>
            </child>
            <child>
              <object class="GtkBox" id="box_ghtcontrols">
                <property name="halign">center</property>
                <property name="valign">start</property>
                <property name="hexpand">0</property>
                <property name="orientation">vertical</property>
                <property name="spacing">5</property>
                <child>
                  <object class="GtkGrid">
                    <property name="valign">center</property>
                    <property name="halign">end</property>
                    <property name="row-spacing">5</property>
                    <property name="column-spacing">5</property>
                    <child>
                      <object class="GtkBox" id="ghtStretchTypecontrols">
                        <property name="orientation">vertical</property>
                        <property name="spacing">5</property>
                        <child>
                          <object class="GtkLabel">
                            <property name="halign">start</property>
                            <property name="label" translatable="1">Type of stretch</property>
                            <attributes>
                              <attribute name="weight" value="bold"></attribute>
                            </attributes>
                          </object>
                        </child>
                        <child>
                          <object class="GtkComboBoxText" id="combo_payneTyp">
                            <property name="tooltip-text" translatable="1">Select type of stretch. Linear performs a simple linear stretch to a new black point. Generalised hyperbolic stretch performs a hyperbolic stretch with parameters for stretch strength, local intensity, symmetry point, and shadow and highlight preservation regions. Modified arcsinh stretch performs an arcsinh stretch with additional parameters for symmetry point, lowlight and highlight preservation. The inverse hyperbolic and arcsinh stretches are also available, useful for working in negative space.</property>
                            <property name="hexpand">1</property>
                            <property name="active">0</property>
                            <items>
                              <item translatable="yes">Generalised hyperbolic transform</item>
                              <item translatable="yes">Inverse generalised hyperbolic transform</item>
                              <item translatable="yes">Modified arcsinh transform</item>
                              <item translatable="yes">Inverse modified arcsinh transform</item>
                              <item translatable="yes">Linear stretch (BP shift)</item>
                            </items>
                            <signal name="changed" handler="on_payneType_changed" swapped="no"/>
                          </object>
                        </child>
                        <layout>
                          <property name="column">0</property>
                          <property name="row">0</property>
                        </layout>
                      </object>
                    </child>
                    <child>
                      <object class="GtkBox" id="ghtColourmodelcontrols">
                        <property name="orientation">vertical</property>
                        <property name="spacing">5</property>
                        <child>
                          <object class="GtkLabel">
                            <property name="halign">start</property>
                            <property name="label" translatable="1">Colour stretch model</property>
                            <attributes>
                              <attribute name="weight" value="bold"></attribute>
                            </attributes>
                          </object>
                        </child>
                        <child>
                          <object class="GtkComboBoxText" id="combo_payne_colour_stretch_model">
                            <property name="tooltip-text" translatable="1">Set the stretch model for colour stretches. The options are: evenly weighted luminance, which calculates the stretch based on a luminance value weighting the R, G and B channels equally; human weighted luminance, which stretches based on a luminance value weighting the R, G and B channels according to the relative sensitivity of the human eye; independent channel values, which applies the stretch independently to each channel of the pixel; and saturation, which applies the stretch to the S component in HSL space. In saturation mode the saturation histogram curve is shown in yellow.
Note: human-weighted luminance is not allowed if less than 3 colour channels are selected as it doesn&apos;t make sense.</property>
                            <property name="hexpand">1</property>
                            <property name="active">0</property>
                            <items>
                              <item translatable="yes">Independent channel values</item>
                              <item translatable="yes">Human weighted luminance</item>
                              <item translatable="yes">Even weighted luminance</item>
                              <item translatable="yes">Saturation stretch</item>
                            </items>
                            <signal name="changed" handler="on_payne_colour_stretch_model_changed" swapped="no"/>
                          </object>
                        </child>
                        <layout>
                          <property name="column">1</property>
                          <property name="row">0</property>
                        </layout>
                      </object>
                    </child>
                  </object>
                </child>
                <child>
                  <object class="GtkLabel">
                    <property name="valign">center</property>
                    <property name="halign">start</property>
                    <property name="margin-top">12</property>
                    <property name="label" translatable="1">Stretch Parameters</property>
                    <attributes>
                      <attribute name="weight" value="bold"></attribute>
                    </attributes>
                  </object>
                </child>
                <child>
                  <object class="GtkBox" id="ghtDcontrols">
                    <property name="valign">center</property>
                    <property name="orientation">vertical</property>
                    <child>
                      <object class="GtkGrid">
                        <child>
                          <object class="GtkLabel" id="label_payne">
                            <property name="halign">start</property>
                            <property name="hexpand">1</property>
                            <property name="label" translatable="1">Stretch factor (ln(D+1))</property>
                            <layout>
                              <property name="column">0</property>
                              <property name="row">0</property>
                            </layout>
                          </object>
                        </child>
                        <child>
                          <object class="GtkSpinButton" id="spin_ghtD">
                            <property name="focusable">1</property>
                            <property name="tooltip-text" translatable="1">Independently controls the contrast added (the slope of the stretch) at SP, thus adjusting the amount of stretch applied to the rest of the image. It does not change the shape of the stretch, just the amount, and should be used in tandem with b to control the distribution of contrast and brightness. When this is set to zero, the stretch will be the identity transform, but any ordered black point adjustment will still occur.</property>
                            <property name="width-chars">10</property>
                            <property name="text">0,000</property>
                            <property name="progress-pulse-step">0.01</property>
                            <property name="input-hints">GTK_INPUT_HINT_NO_EMOJI | GTK_INPUT_HINT_NONE</property>
                            <property name="adjustment">adjustment_payneD</property>
                            <property name="digits">3</property>
                            <signal name="value-changed" handler="on_spin_ghtD_value_changed" swapped="no"/>
                            <layout>
                              <property name="column">1</property>
                              <property name="row">0</property>
                            </layout>
                          </object>
                        </child>
                      </object>
                    </child>
                    <child>
                      <object class="GtkScale" id="scale_ghtD">
                        <property name="focusable">1</property>
                        <property name="adjustment">adjustment_payneD</property>
                        <property name="digits">3</property>
                      </object>
                    </child>
                  </object>
                </child>
                <child>
                  <object class="GtkBox" id="ghtBcontrols">
                    <property name="valign">center</property>
                    <property name="orientation">vertical</property>
                    <child>
                      <object class="GtkGrid">
                        <child>
                          <object class="GtkLabel" id="label_payn">
                            <property name="halign">start</property>
                            <property name="hexpand">1</property>
                            <property name="label" translatable="1">Local stretch intensity (b)</property>
                            <layout>
                              <property name="column">0</property>
                              <property name="row">0</property>
                            </layout>
                          </object>
                        </child>
                        <child>
                          <object class="GtkSpinButton" id="spin_ghtB">
                            <property name="focusable">1</property>
                            <property name="tooltip-text" translatable="1">Controls how tightly the stretch is focused by changing the form of the transform itself. For concentrated stretches (e.g. initial stretch on linear data) a large positive value of b will focus the stretch within a histogram peak while defocusing the stretch away from the peak (such as bright stars). For adjustment of nonlinear images lower or negative values will distribute contrast and brightness more evenly. As a general rule, the value of b will decrease as a stretch sequence nears completion, although larger values (with small D) can still be used for precise placement of additional contrast.</property>
                            <property name="width-chars">10</property>
                            <property name="text">0,500</property>
                            <property name="input-hints">GTK_INPUT_HINT_NO_EMOJI | GTK_INPUT_HINT_NONE</property>
                            <property name="adjustment">adjustment_payneb</property>
                            <property name="digits">3</property>
                            <property name="value">0.5</property>
                            <signal name="value-changed" handler="on_spin_ghtB_value_changed" swapped="no"/>
                            <layout>
                              <property name="column">1</property>
                              <property name="row">0</property>
                            </layout>
                          </object>
                        </child>
                      </object>
                    </child>
                    <child>
                      <object class="GtkScale" id="scale_ghtB">
                        <property name="focusable">1</property>
                        <property name="adjustment">adjustment_payneb</property>
                        <property name="digits">3</property>
                      </object>
                    </child>
                  </object>
                </child>
                <child>
                  <object class="GtkBox" id="ghtSPcontrols">
                    <property name="valign">center</property>
                    <property name="orientation">vertical</property>
                    <child>
                      <object class="GtkGrid">
                        <child>
                          <object class="GtkLabel" id="label_payneS">
                            <property name="halign">start</property>
                            <property name="hexpand">1</property>
                            <property name="label" translatable="1">Symmetry point (SP)</property>
                            <layout>
                              <property name="column">0</property>
                              <property name="row">0</property>
                            </layout>
                          </object>
                        </child>
                        <child>
                          <object class="GtkSpinButton" id="spin_ghtSP">
                            <property name="focusable">1</property>
                            <property name="tooltip-text" translatable="1">Sets the symmetry point around which the stretch is focused - contrast will be distributed symmetrically around SP. This should generally be placed within a histogram peak so that the stretch will widen and lower the peak by adding the most contrast in the stretch at that point. The stretch will move pixel values away from SP. This parameter must be greater than or equal to LP and less than or equal to HP.</property>
                            <property name="valign">center</property>
                            <property name="width-chars">10</property>
                            <property name="text">0,00000</property>
                            <property name="progress-fraction">0.01</property>
                            <property name="progress-pulse-step">0.01</property>
                            <property name="input-hints">GTK_INPUT_HINT_NO_EMOJI | GTK_INPUT_HINT_NONE</property>
                            <property name="adjustment">adjustment_payneSP</property>
                            <property name="digits">5</property>
                            <signal name="value-changed" handler="on_spin_ghtSP_value_changed" swapped="no"/>
                            <layout>
                              <property name="column">2</property>
                              <property name="row">0</property>
                            </layout>
                          </object>
                        </child>
                        <child>
                          <object class="GtkButton" id="eyedropper_button">
                            <property name="focusable">1</property>
                            <property name="receives-default">1</property>
                            <property name="tooltip-text" translatable="1">This dropper allows you to set the background stretch symmetry point  based on the average value of  the current selection. This helps in picking out faint detail above the dark background.</property>
                            <signal name="clicked" handler="on_eyedropper_SP_clicked" swapped="no"/>
                            <child>
                              <object class="GtkImage" id="eyedropper">
                                <property name="resource">/org/siril/ui/pixmaps/eyedropper.svg</property>
                              </object>
                            </child>
                            <layout>
                              <property name="column">1</property>
                              <property name="row">0</property>
                            </layout>
                          </object>
                        </child>
                      </object>
                    </child>
                    <child>
                      <object class="GtkScale" id="scale_ghtSP">
                        <property name="focusable">1</property>
                        <property name="adjustment">adjustment_payneSP</property>
                        <property name="digits">6</property>
                      </object>
                    </child>
                  </object>
                </child>
                <child>
                  <object class="GtkBox" id="ghtLPcontrols">
                    <property name="valign">center</property>
                    <property name="orientation">vertical</property>
                    <child>
                      <object class="GtkGrid">
                        <child>
                          <object class="GtkLabel" id="label_payneL">
                            <property name="halign">start</property>
                            <property name="hexpand">1</property>
                            <property name="label" translatable="1">Shadow protection point (LP)</property>
                            <layout>
                              <property name="column">0</property>
                              <property name="row">0</property>
                            </layout>
                          </object>
                        </child>
                        <child>
                          <object class="GtkSpinButton" id="spin_ghtLP">
                            <property name="focusable">1</property>
                            <property name="tooltip-text" translatable="1">Sets a value below which the stretch is modified to preserve contrast in the shadows. This is done by performing a linear stretch below LP by reserving contrast from the rest of the image. Moving LP towards SP changes both the scope and amount of contrast reservation, the net effect is to push the overall stretch to higher brightness levels whilekeeping the contrast and definition in the background. This parameter must be greater than or equal to 0 and not greater than SP.</property>
                            <property name="width-chars">10</property>
                            <property name="text">0,00000</property>
                            <property name="progress-pulse-step">0.01</property>
                            <property name="input-hints">GTK_INPUT_HINT_NO_EMOJI | GTK_INPUT_HINT_NONE</property>
                            <property name="adjustment">adjustment_payneLP</property>
                            <property name="digits">5</property>
                            <signal name="value-changed" handler="on_spin_ghtLP_value_changed" swapped="no"/>
                            <layout>
                              <property name="column">1</property>
                              <property name="row">0</property>
                            </layout>
                          </object>
                        </child>
                      </object>
                    </child>
                    <child>
                      <object class="GtkScale" id="scale_ghtLP">
                        <property name="focusable">1</property>
                        <property name="adjustment">adjustment_payneLP</property>
                        <property name="digits">5</property>
                      </object>
                    </child>
                  </object>
                </child>
                <child>
                  <object class="GtkBox" id="ghtHPcontrols">
                    <property name="valign">center</property>
                    <property name="orientation">vertical</property>
                    <child>
                      <object class="GtkGrid">
                        <child>
                          <object class="GtkLabel" id="label_payneH">
                            <property name="halign">start</property>
                            <property name="hexpand">1</property>
                            <property name="label" translatable="1">Highlight protection point (HP)</property>
                            <layout>
                              <property name="column">0</property>
                              <property name="row">0</property>
                            </layout>
                          </object>
                        </child>
                        <child>
                          <object class="GtkSpinButton" id="spin_ghtHP">
                            <property name="focusable">1</property>
                            <property name="tooltip-text" translatable="1">Sets a value above which the stretch is modified to preserve contrast in the highlights / stars. This is done by performing a linear stretch of the data above HP by reserving contrast from the rest of the image. Moving HP towards SP inreases both the scope and the amount of this contrast reservation, the net effect is to push the overall stretch to lower brightness levels while keeping the contrast and definition in the highlights. This parameter must be less than or equal to 1 and not less than SP.</property>
                            <property name="width-chars">10</property>
                            <property name="text">1,00000</property>
                            <property name="progress-pulse-step">0.01</property>
                            <property name="input-hints">GTK_INPUT_HINT_NO_EMOJI | GTK_INPUT_HINT_NONE</property>
                            <property name="adjustment">adjustment_payneHP</property>
                            <property name="digits">5</property>
                            <property name="value">1</property>
                            <signal name="value-changed" handler="on_spin_ghtHP_value_changed" swapped="no"/>
                            <layout>
                              <property name="column">1</property>
                              <property name="row">0</property>
                            </layout>
                          </object>
                        </child>
                      </object>
                    </child>
                    <child>
                      <object class="GtkScale" id="scale_ghtHP">
                        <property name="focusable">1</property>
                        <property name="adjustment">adjustment_payneHP</property>
                        <property name="digits">5</property>
                      </object>
                    </child>
                  </object>
                </child>
                <child>
                  <object class="GtkBox" id="ghtBPcontrols">
                    <property name="valign">center</property>
                    <property name="orientation">vertical</property>
                    <child>
                      <object class="GtkGrid">
                        <child>
                          <object class="GtkLabel">
                            <property name="halign">start</property>
                            <property name="hexpand">1</property>
                            <property name="label" translatable="1">Black Point (BP)</property>
                            <layout>
                              <property name="column">0</property>
                              <property name="row">0</property>
                            </layout>
                          </object>
                        </child>
                        <child>
                          <object class="GtkSpinButton" id="spin_ghtBP">
                            <property name="focusable">1</property>
                            <property name="tooltip-text" translatable="1">Black point adjustment. This is a constant value that is subtracted from the image. NOTE: altering BP can clip pixels in which case this transformation is non-reversible.</property>
                            <property name="halign">end</property>
                            <property name="width-chars">10</property>
                            <property name="text">0,00000</property>
                            <property name="progress-pulse-step">0.01</property>
                            <property name="input-hints">GTK_INPUT_HINT_NO_EMOJI | GTK_INPUT_HINT_NONE</property>
                            <property name="adjustment">adj_black_point_payne</property>
                            <property name="digits">5</property>
                            <signal name="value-changed" handler="on_spin_ghtBP_value_changed" swapped="no"/>
                            <layout>
                              <property name="column">1</property>
                              <property name="row">0</property>
                            </layout>
                          </object>
                        </child>
                      </object>
                    </child>
                    <child>
                      <object class="GtkScale" id="scale_ghtBP">
                        <property name="focusable">1</property>
                        <property name="adjustment">adj_black_point_payne</property>
                        <property name="digits">5</property>
                      </object>
                    </child>
                  </object>
                </child>
              </object>
            </child>
          </object>
        </child>
      </object>
    </child>
    <child internal-child="action_area">
      <object class="GtkButtonBox">
        <property name="valign">center</property>
        <property name="can-focus">False</property>
        <property name="layout-style">end</property>
        <child>
          <object class="GtkButton" id="button_histo_reset">
            <property name="label" translatable="1">Reset</property>
            <property name="focusable">1</property>
            <property name="receives-default">1</property>
            <property name="tooltip-text" translatable="1">Reset</property>
            <property name="valign">start</property>
            <signal name="clicked" handler="on_button_histo_reset_clicked" swapped="no"/>
          </object>
          <packing>
            <property name="expand">True</property>
            <property name="fill">True</property>
            <property name="position">0</property>
          </packing>
        </child>
        <child>
          <object class="GtkButton" id="button_histo_close">
            <property name="label" translatable="1">Close</property>
            <property name="focusable">1</property>
            <property name="receives-default">1</property>
            <property name="tooltip-text" translatable="1">Close</property>
            <property name="valign">start</property>
            <signal name="clicked" handler="on_button_histo_close_clicked" swapped="no"/>
          </object>
          <packing>
            <property name="expand">False</property>
            <property name="fill">True</property>
            <property name="position">1</property>
          </packing>
        </child>
        <child>
          <object class="GtkButton" id="button_histo_apply">
            <property name="label" translatable="1">Apply</property>
            <property name="focusable">1</property>
            <property name="receives-default">1</property>
            <property name="tooltip-text" translatable="1">Apply histogram transformation</property>
            <property name="valign">start</property>
            <signal name="clicked" handler="on_button_histo_apply_clicked" swapped="no"/>
            <style>
              <class name="suggested-action"/>
            </style>
          </object>
          <packing>
            <property name="expand">False</property>
            <property name="fill">True</property>
            <property name="position">2</property>
          </packing>
        </child>
      </object>
    </child>
  </object>
</interface>
